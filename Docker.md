# Docker

## Manage docker containers via cli

| COMMAND                                                        | DESCRIPTION                                                                                                                                                                                                                               |
| -------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `docker run -it <image_name>`                                  | Start a new container in interactive mode. If the app is not interactive append /bin/bash or /bin/sh (if there is no bash). Exiting form this stops the container. To detach without stopping the container, press: Ctrl + P  →  Ctrl + Q |
| `docker run -d <image_name>`                                   | Start a new container in detached mode                                                                                                                                                                                                    |
| `docker exec -it <container_name/ID> /bin/bash`                | Open an interactive shell inside a container (if there is no bash in some images use /bin/sh). Exiting from this does not stop the container.                                                                                             |
| `docker start <container_name/ID>`                             | Start a container                                                                                                                                                                                                                         |
| `docker stop <container_name/ID)>`                             | Graceful stop a container                                                                                                                                                                                                                 |
| `docker restart <container_name/ID>`                           | Graceful stop and restart a container                                                                                                                                                                                                     |
| `docker rm <container_name/ID>`                                | Destroy a container                                                                                                                                                                                                                       |
| `docker rm $(docker ps  -a -q)`                                | To destroy all the stopped and running containers. Compound shell commands like this can be used in other places too.                                                                                                                     |
| `docker rmi <image_name>` \ `dokcer image rm <image_name>`     | To delete an image                                                                                                                                                                                                                        |
| `docker system prune`                                          | To delete all dangling and unused images, containers, cache and volumes                                                                                                                                                                   |
| `docker system prune -a`                                       | To delete all used and unused images                                                                                                                                                                                                      |
| `docker ps`                                                    | List running containers                                                                                                                                                                                                                   |
| `docker ps -a`                                                 | List all containers, including stopped                                                                                                                                                                                                    |
| `docker inspect <conainer_name/ID>`                            | Show information about a container                                                                                                                                                                                                        |
| `docker inspect <image_name>`                                  | Show information about an image                                                                                                                                                                                                           |
| `docker image ls` \ `docker images`                            | List all local images                                                                                                                                                                                                                     |
| `docker pull <user>/<repository>:<tag>`                        | Pull an image from a registry                                                                                                                                                                                                             |
| `docker volume ls`                                             | List all volumes                                                                                                                                                                                                                          |
| `docker volume rm <volume_name>`                               | Destroy a volume                                                                                                                                                                                                                          |
| `docker build -t <cotainer_name:Version> <path_of_Dockerfile>` | Build custom docker image                                                                                                                                                                                                                 |

## Manage docker containers via compose file

| COMMAND                 | DESCRIPTION                                                                                                                  |
| ----------------------- | ---------------------------------------------------------------------------------------------------------------------------- |
| docker compose up -d    | Create container(s) in detached mode (without the -d parameter you can do any other task; exiting then stops the containers) |
| docker compose down     | Destroys the container(s)                                                                                                    |
| docker compose stop     | Stops the container(s)                                                                                                       |
| docker compose ps       | List running containers created by compose file                                                                              |
| `docker compose ps -a`  | List all containers, including stopped that were created by compose file                                                     |
| `docker compose config` | Check and validate the compose-yaml file                                                                                     |
